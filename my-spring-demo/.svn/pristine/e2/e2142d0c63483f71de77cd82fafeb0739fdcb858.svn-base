<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.isz.erp.house.mapper.ResidentialBuildingHouseNoMapper">
    <delete id="deleteByUnitIds" parameterType="java.lang.String">
        delete from residential_building_house_no where unit_id in (${unit_id_delete})
    </delete>

    <delete id="deleteByFloorIds" parameterType="java.lang.String">
        delete from residential_building_house_no where floor_id in (${floor_id_delete})
    </delete>

    <select id="searchBuildingHouseNoList" parameterType="java.util.Map" resultType="com.isz.erp.facade.house.entity.ResidentialBuildingHouseNo">
        SELECT * FROM residential_building_house_no WHERE building_id=#{building_id} AND unit_id=#{unit_id} AND floor_id=#{floor_id} ORDER BY house_no
    </select>
    
    <select id="countSearchBuildingHouseNo" parameterType="java.util.Map" resultType="java.lang.Integer">
        SELECT COUNT(1) FROM residential_building_house_no WHERE building_id=#{building_id} AND unit_id=#{unit_id} AND floor_id=#{floor_id}
    </select>

    <select id="selectByMap" parameterType="java.util.Map" resultType="com.isz.erp.facade.house.entity.ResidentialBuildingHouseNo">
        SELECT * FROM residential_building_house_no WHERE building_id=#{building_id} AND unit_id=#{unit_id} AND floor_id=#{floor_id}
        <if test="null != house_no and '' != house_no">
            AND house_no=#{house_no}
        </if>
        <if test="null != house_no_id and '' != house_no_id">
            AND house_no_id=#{house_no_id}
        </if>
    </select>

    <select id="selectByHouseNoId" parameterType="java.lang.String" resultType="com.isz.erp.facade.house.entity.ResidentialBuildingHouseNo">
        select * from residential_building_house_no where house_no_id=#{house_no_id} limit 1
    </select>
</mapper>