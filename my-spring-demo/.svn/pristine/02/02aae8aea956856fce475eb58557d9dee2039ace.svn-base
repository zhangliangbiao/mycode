<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.isz.erp.house.mapper.HouseExplorationImgMapper">

	<select id="selectHouseExplorationImgList" parameterType="string"  resultType="com.isz.erp.facade.house.entity.HouseExplorationImg">
 		SELECT a.*,ifnull(su.user_name,'') create_uname,ifnull(sd.dep_name,'') create_dname from 
		(select hei.exploration_img_id,hei.img_id,hei.img_type,hei.img_sub_type,hei.house_exploration_id,
			hei.create_uid,hei.create_time,img.src 
 			from house_exploration_img hei ,image img 
 			where hei.house_exploration_id=#{house_exploration_id}  and img.img_id=hei.img_id and img.deleted=0
		) a 
		LEFT JOIN sys_user su ON su.user_id=a.create_uid 
		LEFT JOIN sys_department sd ON sd.dep_id=su.dep_id
 		
	</select>	
</mapper>