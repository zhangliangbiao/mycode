<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.isz.erp.house.mapper.FitmentRoomMapper">
	<!-- 批量删除 -->
	<delete id="deleteByHouseId" parameterType="java.lang.String">
		DELETE fr FROM fitment_room fr
		INNER JOIN house_room hr ON fr.room_id=hr.room_id
		INNER JOIN house h ON h.house_id=hr.house_id
		WHERE h.house_id=#{house_id}
	</delete>
	<!-- 装修房间列表 -->
	<select id="selectListByFitmentId" parameterType="java.lang.String" resultType="com.isz.erp.facade.house.entity.FitmentRoom">
		SELECT * 
		FROM fitment_room 
		WHERE 
		fitment_id=#{fitment_id}
	</select>
	<!-- 批量删除 -->
	<delete id="deleteByFitmentId" parameterType="java.lang.String">
		DELETE fr FROM fitment_room fr
		WHERE fr.fitment_id=#{fitment_id}
	</delete>
	<!-- 查询装修房间 -->
	<select id="selectFitmentRoomByMap" parameterType="java.util.Map" resultType="com.isz.erp.facade.house.entity.FitmentRoom">
		SELECT *
		FROM fitment_room
		WHERE fitment_room_id IS NOT NULL
		<if test="null != public_flag and '' != public_flag">
			AND public_flag=#{public_flag}
		</if>
		<if test="null != fitment_id and '' != fitment_id">
			AND fitment_id=#{fitment_id}
		</if>
		<if test="null != room_no and '' != room_no">
			AND room_no=#{room_no}
		</if>
	</select>

	<select id="selectFitmentRoomIdsByFitmentId" parameterType="java.lang.String" resultType="java.lang.String">
		SELECT GROUP_CONCAT(fr.fitment_room_id) FROM fitment_room fr
		WHERE fr.fitment_id=#{fitment_id}
	</select>
</mapper>