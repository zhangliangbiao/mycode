<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.isz.erp.house.mapper.HouseRolesChangeHistoryMapper">
	<!-- 查询资产管家 -->
<select id="selectPositionByAssetManager" parameterType="java.util.Map" resultType="com.isz.erp.facade.user.entity.SysPosition">
		SELECT * from sys_position where 1=1 
		<if test="position_id != null and position_id != ''"> and position_id=#{position_id}  </if> 
		and (position_name like '%资产管家%' or  position_name like '%综合管家%')
</select>
<!-- 查询用户信息（包含角色id） -->
<select id="selectUserByUserId" parameterType="java.lang.String" resultType="com.isz.erp.facade.user.entity.SysUser">
	SELECT
		t.*,
		ur.role_id
	FROM
		sys_user t
	LEFT JOIN sys_user_role ur ON t.user_id = ur.user_id
	where t.user_id=#{user_id}
	</select>
	
	<select id="selectLastRecord" parameterType="map" resultType="com.isz.erp.facade.house.entity.HouseRolesChangeHistory">
		select * from house_roles_change_history hrch where hrch.house_id=#{house_id}  ORDER BY hrch.create_time desc limit 1
	</select>
	
	
</mapper>